/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 */

package CS5003;

/**
 *
 *  @author Daniel O'Sullivan, Awad Saad, Hardik Prandit
 */

import java.time.LocalDate;
import java.io.Serializable;

public class Product implements Serializable {
    
    // Serial version ID
    
    private static final long serialVersionUID = 1L;
    
    // Fields

    public static int nextProductId = 1;
    
    private int productId;
    
    private String productName;
    
    private LocalDate entryDate;
    
    private int productQuantity;
    
    private Activity[] activities;
    
    private int activityCount = 0;
    
    // Constructor
    
    public Product(String name, int quantity)
    {
        
        // Exception Handling
    
        if (name == null || name.isBlank()) throw new IllegalArgumentException("Name required");
        if (quantity < 0) throw new IllegalArgumentException("Quantity cannot be negative");
    
        // Fields for Constructor
        
        productId = nextProductId;
        nextProductId++;
        productName = name;
        productQuantity = quantity;
        entryDate = LocalDate.now();
        activities = new Activity[4];
        
    }
    
    // Methods
    
    // Getters
    
    public int getProductId()
            {
                return productId;
            }
    
    public String getProductName()
    {
        return productName;
    }
    
    public int getProductQuantity()
    {
        return productQuantity;
    }

    public LocalDate getEntryDate()
    {
        return entryDate;
    }
    
    public Activity[] getActivities()
    {
        // Return a copy of the array
        return java.util.Arrays.copyOf(activities, activities.length);
    }     
    
    // Setters
    
    public void setProductQuantity(int quantity)
    {
        productQuantity = quantity;
    }
       
    // Display
    
    public void display()
    {
        System.out.println("Product ID: " + productId);
        System.out.println("Name: " + productName);
        System.out.println("Date Added: " + entryDate);
        System.out.println("Quantity: " + productQuantity);
    }
    
    // Tracking activities
    
    public void addActivity(Activity a)
    {
       if (a == null) throw new IllegalArgumentException("Activity cannot be null");
       if (activityCount < 4)
       {
           activities[activityCount] = a;
           activityCount++;
       }
       else 
       {
        for (int i =1; i<4; i++)
        {
            activities[i-1] = activities[i];
        }
        activities[3] = a;
       }
    }
}
